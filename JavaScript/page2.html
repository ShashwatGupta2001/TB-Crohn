<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>Web Interface for Fat-ratio computation</title>
<link href="js_example_style.css" rel="stylesheet" type="text/css" />
</head>

<body>
<script src="https://docs.opencv.org/4.5.5/opencv.js" type="text/javascript"></script>
<script src="script.js" type="text/javascript"></script>

<h2>Web Interface for Fat-ratio computation</h2>
<p>
Steps:
<ol>
    <li>Upload the binarised image of L4 CT Section</li>
    <li>Check if the image is correctly uploaded using the preview displayed</li>
    <li>Click Compute Ratio to get the ratio</li>
</ol>
</p>

<div>
<table cellpadding="0" cellspacing="0" width="0" border="0">
<tr>
<td>
<div class="caption">Upload Image: <input type="file" id="fileInput" name="file" accept="image/*" /></div>
</td>
<!-- <td>
<canvas id="canvasOutput"></canvas>
</td> -->
</tr>
<tr>
<td>
<canvas id="canvasInput"></canvas>
</td>
<!-- <td>
<div class="caption">canvasOutput</div>
</td> -->
</tr>
</table>
</div>

<div>
<div class="control"><button id="Compute_Ratio">Compute Ratio</button></div>
<p class="err" id="errorMessage"></p>
</div>
<div id="ratioDisplay"></div>
<div id="resultDisplay"></div>

<script>
document.getElementById('Compute_Ratio').addEventListener('click', processImage);

document.getElementById('fileInput').addEventListener('change', function(event) {
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = function(event) {
        const img = new Image();
        img.onload = function() {
            const canvas = document.getElementById('canvasInput');
            const ctx = canvas.getContext('2d');
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0);
        }
        img.src = event.target.result;
    }

    reader.readAsDataURL(file);
});
</script>

</body>
</html>
